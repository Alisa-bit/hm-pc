(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editArticle"],{"1feb":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"publish-container"},[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("编辑文章")])],1)],1),r("el-form",{ref:"articleForm",attrs:{rules:e.rules,model:e.article,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{model:{value:e.article.title,callback:function(t){e.$set(e.article,"title","string"===typeof t?t.trim():t)},expression:"article.title"}})],1),r("el-form-item",{attrs:{label:"内容：",prop:"content"}},[r("quill-editor",{ref:"myeditor",attrs:{options:e.editorOption},model:{value:e.article.content,callback:function(t){e.$set(e.article,"content",t)},expression:"article.content"}})],1),r("el-form-item",{attrs:{label:"封面"}},[r("el-radio-group",{model:{value:e.article.cover.type,callback:function(t){e.$set(e.article.cover,"type",t)},expression:"article.cover.type"}},[r("el-radio",{attrs:{label:0}},[e._v("无图")]),r("el-radio",{attrs:{label:1}},[e._v("单图")]),r("el-radio",{attrs:{label:3}},[e._v("三图")]),r("el-radio",{attrs:{label:-1}},[e._v("自动")])],1),e.article.cover.type>0?r("div",{staticClass:"coverBox"},[r("cover",{key:e.article.cover.type,ref:"coveComponent",attrs:{images:e.article.cover.images,picknum:e.article.cover.type}})],1):e._e()],1),r("el-form-item",{attrs:{label:"频道",prop:"channel_id"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.article.channel_id,callback:function(t){e.$set(e.article,"channel_id",t)},expression:"article.channel_id"}},e._l(e.channels,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.hAddArticle(!1)}}},[e._v("发表")]),r("el-button",{on:{click:function(t){return e.hAddArticle(!0)}}},[e._v("存入草稿")])],1)],1)],1)],1)},a=[],l=(r("c975"),r("953d")),n=(r("a753"),r("8096"),r("14e1"),r("2423")),c=r("fa57"),o={components:{quillEditor:l["quillEditor"],Cover:c["a"]},data:function(){return{editorOption:{placeholder:"",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["image"]]}},channels:[],article:{title:"",content:"",cover:{type:0,images:[]},channel_id:"",id:""},rules:{title:[{required:!0,message:"不能为空",trigger:"blur"},{min:5,max:30,message:"长度在5到30之间",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"},{min:20,max:3e4,message:"最少20个字",trigger:"blur"}],channel_id:[{required:!0,message:"请选择文章频道",trigger:"blur"}]}}},methods:{hGetChannels:function(){var e=this;Object(n["f"])().then((function(t){e.channels=t.data.data.channels}))},hgetRender:function(){var e=this;this.id=location.hash.substring(location.hash.indexOf("=")+1),Object(n["b"])(this.id).then((function(t){e.article=t.data.data}))},hAddArticle:function(e){var t=this;this.article.cover.type>0&&(this.article.cover.images=this.$refs.coveComponent.setImages()),this.$refs["articleForm"].validate((function(r){if(!r)return!1;console.log(t.article),Object(n["e"])(t.id,{draft:e},t.article).then((function(e){t.$message({message:"文章修改成功",type:"success"})}))}))}},computed:{editor:function(){return this.$refs.myeditor.quill}},mounted:function(){this.hGetChannels(),this.hgetRender(),this.editor.container.style.height="".concat(500,"px")}},s=o,d=r("2877"),u=Object(d["a"])(s,i,a,!1,null,"6ca6fa92",null);t["default"]=u.exports},c975:function(e,t,r){"use strict";var i=r("23e7"),a=r("4d64").indexOf,l=r("a640"),n=r("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,s=l("indexOf"),d=n("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:o||!s||!d},{indexOf:function(e){return o?c.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=editArticle.12e15b0d.js.map